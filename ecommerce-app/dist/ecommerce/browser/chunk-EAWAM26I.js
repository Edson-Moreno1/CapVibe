import{b as T,d as k,e as D,h as I}from"./chunk-YDXXOSOF.js";import{b as P,c as h,d as V,e as G,f as R,i as B,k as j,l as q,m as O}from"./chunk-5VHBGBF3.js";import{a as N}from"./chunk-OB43FXY2.js";import"./chunk-5SEUD43N.js";import{$a as y,Fa as F,Ja as d,Lb as M,Qa as v,R as u,Ra as _,Sa as s,Xa as i,Ya as e,Z as C,Za as p,_ as S,ab as w,eb as n,fb as E,gb as L,wa as r}from"./chunk-VXNY4ACK.js";function z(o,l){if(o&1&&(i(0,"div",8)(1,"div",30)(2,"span",31),n(3,"!"),e(),i(4,"div")(5,"p",32),n(6),e()()()()),o&2){let a=w();r(6),E(a.errorMessage)}}function H(o,l){o&1&&n(0," El correo es obligatorio ")}function U(o,l){o&1&&n(0," Ingresa un correo v\xE1lido ")}function J(o,l){if(o&1&&(i(0,"p",15)(1,"span",33),n(2,"!"),e(),d(3,H,1,0)(4,U,1,0),e()),o&2){let a,t,m=w();r(3),s(!((a=m.loginForm.get("email"))==null||a.errors==null)&&a.errors.required?3:-1),r(),s(!((t=m.loginForm.get("email"))==null||t.errors==null)&&t.errors.email?4:-1)}}function K(o,l){o&1&&(i(0,"p",15)(1,"span",33),n(2,"!"),e(),n(3," La contrase\xF1a es obligatoria "),e())}function Q(o,l){o&1&&(C(),i(0,"svg",34),p(1,"circle",35)(2,"path",36),e(),S(),i(3,"span"),n(4,"Iniciando sesi\xF3n..."),e())}function W(o,l){o&1&&(i(0,"span"),n(1,"Iniciar Sesi\xF3n"),e())}var A=class o{fb=u(q);authService=u(N);router=u(k);route=u(T);loginForm;loading=!1;errorMessage="";showPassword=!1;ngOnInit(){this.loginForm=this.fb.group({email:["",[h.required,h.email]],password:["",h.required]})}onSubmit(){this.loginForm.valid&&(this.loading=!0,this.errorMessage="",this.authService.login(this.loginForm.value).subscribe({next:()=>{this.loading=!1;let l=this.route.snapshot.queryParamMap.get("redirectTo")||"/products";this.router.navigateByUrl(l)},error:l=>{this.loading=!1,this.errorMessage=l.error?.message||"Error al iniciar sesi\xF3n. Verifica tus credenciales."}}))}static \u0275fac=function(a){return new(a||o)};static \u0275cmp=F({type:o,selectors:[["app-login"]],decls:54,vars:16,consts:[[1,"min-h-screen","flex","items-center","justify-center","bg-gradient-to-br","from-blue-50","via-white","to-purple-50","py-12","px-4","sm:px-6","lg:px-8"],[1,"max-w-md","w-full","space-y-8"],[1,"text-center"],[1,"mx-auto","h-16","w-16","bg-blue-600","rounded-full","flex","items-center","justify-center","shadow-lg"],[1,"text-white","text-3xl"],[1,"mt-6","text-3xl","font-extrabold","text-gray-900"],[1,"mt-2","text-sm","text-gray-600"],[1,"bg-white","rounded-2xl","shadow-xl","p-8","space-y-6"],["data-cy","login-error",1,"bg-red-50","border-l-4","border-red-500","p-4","rounded-lg"],["data-cy","login-form",1,"space-y-5",3,"ngSubmit","formGroup"],["for","email",1,"block","text-sm","font-semibold","text-gray-700","mb-2"],[1,"relative"],[1,"absolute","inset-y-0","left-0","pl-3","flex","items-center","pointer-events-none"],[1,"text-gray-400"],["type","email","id","email","formControlName","email","placeholder","tu@email.com","data-cy","login-email",1,"w-full","pl-10","pr-4","py-3","border","rounded-lg","focus:ring-2","focus:ring-blue-500","focus:border-transparent","transition","outline-none"],[1,"mt-2","text-sm","text-red-600","flex","items-center"],["for","password",1,"block","text-sm","font-semibold","text-gray-700","mb-2"],["id","password","formControlName","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022","data-cy","login-password",1,"w-full","pl-10","pr-12","py-3","border","rounded-lg","focus:ring-2","focus:ring-blue-500","focus:border-transparent","transition","outline-none",3,"type"],["type","button",1,"absolute","inset-y-0","right-0","pr-3","flex","items-center","text-gray-400","hover:text-gray-600","transition",3,"click"],[1,"text-sm"],[1,"flex","items-center","justify-between"],[1,"flex","items-center"],["id","remember-me","name","remember-me","type","checkbox",1,"h-4","w-4","text-blue-600","focus:ring-blue-500","border-gray-300","rounded","cursor-pointer"],["for","remember-me",1,"ml-2","block","text-sm","text-gray-700","cursor-pointer"],["href","#",1,"font-medium","text-blue-600","hover:text-blue-500","transition"],["type","submit","data-cy","login-submit",1,"w-full","flex","justify-center","items-center","gap-2","py-3","px-4","border","border-transparent","rounded-lg","shadow-sm","text-sm","font-bold","text-white","bg-blue-600","hover:bg-blue-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-blue-500","disabled:bg-gray-300","disabled:cursor-not-allowed","transition","duration-200",3,"disabled"],[1,"text-center","space-y-3"],[1,"text-sm","text-gray-600"],["routerLink","/register",1,"font-semibold","text-blue-600","hover:text-blue-500","transition"],["routerLink","/",1,"inline-flex","items-center","gap-1","text-sm","text-gray-600","hover:text-gray-900","transition"],[1,"flex","items-start"],[1,"text-red-500","mt-0.5","mr-3"],[1,"text-sm","font-medium","text-red-800"],[1,"mr-1"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","h-5","w-5","text-white"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"]],template:function(a,t){if(a&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"span",4),n(5,"\u{1F9E2}"),e()(),i(6,"h2",5),n(7," Bienvenido a CapVibe "),e(),i(8,"p",6),n(9," Inicia sesi\xF3n para continuar "),e()(),i(10,"div",7),d(11,z,7,1,"div",8),i(12,"form",9),y("ngSubmit",function(){return t.onSubmit()}),i(13,"div")(14,"label",10),n(15," Correo Electr\xF3nico "),e(),i(16,"div",11)(17,"div",12)(18,"span",13),n(19,"@"),e()(),p(20,"input",14),e(),d(21,J,5,2,"p",15),e(),i(22,"div")(23,"label",16),n(24," Contrase\xF1a "),e(),i(25,"div",11)(26,"div",12)(27,"span",13),n(28,"\u2022"),e()(),p(29,"input",17),i(30,"button",18),y("click",function(){return t.showPassword=!t.showPassword}),i(31,"span",19),n(32),e()()(),d(33,K,4,0,"p",15),e(),i(34,"div",20)(35,"div",21),p(36,"input",22),i(37,"label",23),n(38," Recordarme "),e()(),i(39,"div",19)(40,"a",24),n(41," \xBFOlvidaste tu contrase\xF1a? "),e()()(),i(42,"button",25),d(43,Q,5,0)(44,W,2,0,"span"),e()()(),i(45,"div",26)(46,"p",27),n(47," \xBFNo tienes cuenta? "),i(48,"a",28),n(49," Reg\xEDstrate aqu\xED "),e()(),i(50,"a",29)(51,"span"),n(52,"\u2190"),e(),n(53," Volver al inicio "),e()()()()),a&2){let m,c,g,f,x,b;r(11),s(t.errorMessage?11:-1),r(),v("formGroup",t.loginForm),r(8),_("border-red-500",((m=t.loginForm.get("email"))==null?null:m.invalid)&&((m=t.loginForm.get("email"))==null?null:m.touched))("border-gray-300",!((c=t.loginForm.get("email"))!=null&&c.invalid)||!((c=t.loginForm.get("email"))!=null&&c.touched)),r(),s((g=t.loginForm.get("email"))!=null&&g.invalid&&((g=t.loginForm.get("email"))!=null&&g.touched)?21:-1),r(8),_("border-red-500",((f=t.loginForm.get("password"))==null?null:f.invalid)&&((f=t.loginForm.get("password"))==null?null:f.touched))("border-gray-300",!((x=t.loginForm.get("password"))!=null&&x.invalid)||!((x=t.loginForm.get("password"))!=null&&x.touched)),v("type",t.showPassword?"text":"password"),r(3),L(" ",t.showPassword?"Ocultar":"Ver"," "),r(),s((b=t.loginForm.get("password"))!=null&&b.invalid&&((b=t.loginForm.get("password"))!=null&&b.touched)?33:-1),r(9),v("disabled",t.loginForm.invalid||t.loading),r(),s(t.loading?43:44)}},dependencies:[M,I,D,O,R,P,V,G,B,j],encapsulation:2})};export{A as LoginComponent};
