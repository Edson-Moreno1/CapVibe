import{a as p}from"./chunk-5SEUD43N.js";import{I as r,L as s,R as n,Rb as o,h as a}from"./chunk-VXNY4ACK.js";var b=class i{http=n(o);baseUrl=`${p.BACK_URL}/cart`;_cart=new a([]);cart$=this._cart.asObservable();constructor(){this.loadCartInitial()}getCart(){return this.http.get(`${this.baseUrl}/`).pipe(r(e=>{let t=e.items||[];this._cart.next(t)}))}addToCart(e,t=1){return this.http.post(`${this.baseUrl}/add`,{productId:e,quantity:t}).pipe(r(()=>{this.getCart().subscribe()}))}loadCartInitial(){}getTotal(){return this._cart.value.reduce((e,t)=>e+(t.product?.price||0)*t.quantity,0)}removeFromCart(e){this.http.delete(`${this.baseUrl}/remove/${e}`).pipe(r(()=>{this.getCart().subscribe()})).subscribe()}updateQuantity(e,t){t<1||this.http.put(`${this.baseUrl}/update/${e}`,{quantity:t}).pipe(r(()=>{this.getCart().subscribe()})).subscribe()}clearCart(){this.http.delete(`${this.baseUrl}/clear`).pipe(r(()=>{this.getCart().subscribe()})).subscribe()}static \u0275fac=function(t){return new(t||i)};static \u0275prov=s({token:i,factory:i.\u0275fac,providedIn:"root"})};export{b as a};
