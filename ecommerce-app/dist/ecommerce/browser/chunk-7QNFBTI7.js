import{d as N,e as I,h as P}from"./chunk-YDXXOSOF.js";import{b as G,c as p,d as L,e as q,f as A,i as j,k as z,l as O,m as B}from"./chunk-5VHBGBF3.js";import{a as V}from"./chunk-OB43FXY2.js";import"./chunk-5SEUD43N.js";import{$a as S,Fa as D,Ja as d,Lb as k,Qa as C,R as y,Ra as w,Sa as m,Xa as i,Ya as e,Z as R,Za as u,_ as M,ab as E,eb as r,fb as F,gb as T,wa as o}from"./chunk-VXNY4ACK.js";function J(n,l){if(n&1&&(i(0,"div",8)(1,"div",23)(2,"span",32),r(3,"!"),e(),i(4,"p",33),r(5),e()()()),n&2){let a=E();o(5),F(a.errorMessage)}}function Y(n,l){if(n&1&&(i(0,"div",9)(1,"div",23)(2,"span",34),r(3,"\u2713"),e(),i(4,"p",35),r(5),e()()()),n&2){let a=E();o(5),F(a.successMessage)}}function K(n,l){n&1&&(i(0,"p",16)(1,"span",36),r(2,"!"),e(),r(3," El nombre es obligatorio "),e())}function Q(n,l){n&1&&r(0," El correo es obligatorio ")}function U(n,l){n&1&&r(0," Ingresa un correo v\xE1lido ")}function W(n,l){if(n&1&&(i(0,"p",16)(1,"span",36),r(2,"!"),e(),d(3,Q,1,0)(4,U,1,0),e()),n&2){let a,t,s=E();o(3),m(!((a=s.registerForm.get("email"))==null||a.errors==null)&&a.errors.required?3:-1),o(),m(!((t=s.registerForm.get("email"))==null||t.errors==null)&&t.errors.email?4:-1)}}function X(n,l){n&1&&(i(0,"p",16)(1,"span",36),r(2,"!"),e(),r(3," La contrase\xF1a debe tener al menos 6 caracteres "),e())}function Z(n,l){n&1&&(R(),i(0,"svg",37),u(1,"circle",38)(2,"path",39),e(),M(),i(3,"span"),r(4,"Creando cuenta..."),e())}function $(n,l){n&1&&(i(0,"span"),r(1,"Crear Cuenta"),e())}var H=class n{fb=y(O);authService=y(V);router=y(N);registerForm;loading=!1;errorMessage="";successMessage="";showPassword=!1;ngOnInit(){this.registerForm=this.fb.group({name:["",p.required],email:["",[p.required,p.email]],password:["",[p.required,p.minLength(6)]]})}onSubmit(){this.registerForm.valid&&(this.loading=!0,this.errorMessage="",this.successMessage="",this.authService.register(this.registerForm.value).subscribe({next:()=>{this.loading=!1,this.successMessage="\xA1Cuenta creada exitosamente! Redirigiendo...",setTimeout(()=>{this.router.navigate(["/login"])},2e3)},error:l=>{this.loading=!1,this.errorMessage=l.error?.message||"Error al crear la cuenta. Intenta nuevamente."}}))}static \u0275fac=function(a){return new(a||n)};static \u0275cmp=D({type:n,selectors:[["app-register"]],decls:65,vars:22,consts:[[1,"min-h-screen","flex","items-center","justify-center","bg-gradient-to-br","from-purple-50","via-white","to-blue-50","py-12","px-4","sm:px-6","lg:px-8"],[1,"max-w-md","w-full","space-y-8"],[1,"text-center"],[1,"mx-auto","h-16","w-16","bg-purple-600","rounded-full","flex","items-center","justify-center","shadow-lg"],[1,"text-white","text-3xl"],[1,"mt-6","text-3xl","font-extrabold","text-gray-900"],[1,"mt-2","text-sm","text-gray-600"],[1,"bg-white","rounded-2xl","shadow-xl","p-8","space-y-6"],["data-cy","register-error",1,"bg-red-50","border-l-4","border-red-500","p-4","rounded-lg"],["data-cy","register-success",1,"bg-green-50","border-l-4","border-green-500","p-4","rounded-lg"],["data-cy","register-form",1,"space-y-5",3,"ngSubmit","formGroup"],["for","name",1,"block","text-sm","font-semibold","text-gray-700","mb-2"],[1,"relative"],[1,"absolute","inset-y-0","left-0","pl-3","flex","items-center","pointer-events-none"],[1,"text-gray-400"],["type","text","id","name","formControlName","name","placeholder","Juan P\xE9rez","data-cy","register-name",1,"w-full","pl-10","pr-4","py-3","border","rounded-lg","focus:ring-2","focus:ring-purple-500","focus:border-transparent","transition","outline-none"],[1,"mt-2","text-sm","text-red-600","flex","items-center"],["for","email",1,"block","text-sm","font-semibold","text-gray-700","mb-2"],["type","email","id","email","formControlName","email","placeholder","tu@email.com","data-cy","register-email",1,"w-full","pl-10","pr-4","py-3","border","rounded-lg","focus:ring-2","focus:ring-purple-500","focus:border-transparent","transition","outline-none"],["for","password",1,"block","text-sm","font-semibold","text-gray-700","mb-2"],["id","password","formControlName","password","placeholder","M\xEDnimo 6 caracteres","data-cy","register-password",1,"w-full","pl-10","pr-12","py-3","border","rounded-lg","focus:ring-2","focus:ring-purple-500","focus:border-transparent","transition","outline-none",3,"type"],["type","button",1,"absolute","inset-y-0","right-0","pr-3","flex","items-center","text-gray-400","hover:text-gray-600","transition",3,"click"],[1,"text-sm"],[1,"flex","items-start"],["id","terms","type","checkbox",1,"h-4","w-4","mt-1","text-purple-600","focus:ring-purple-500","border-gray-300","rounded","cursor-pointer"],["for","terms",1,"ml-2","block","text-sm","text-gray-700","cursor-pointer"],["href","#",1,"text-purple-600","hover:text-purple-500","font-medium"],["type","submit","data-cy","register-submit",1,"w-full","flex","justify-center","items-center","gap-2","py-3","px-4","border","border-transparent","rounded-lg","shadow-sm","text-sm","font-bold","text-white","bg-purple-600","hover:bg-purple-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-purple-500","disabled:bg-gray-300","disabled:cursor-not-allowed","transition","duration-200",3,"disabled"],[1,"text-center","space-y-3"],[1,"text-sm","text-gray-600"],["routerLink","/login",1,"font-semibold","text-purple-600","hover:text-purple-500","transition"],["routerLink","/",1,"inline-flex","items-center","gap-1","text-sm","text-gray-600","hover:text-gray-900","transition"],[1,"text-red-500","mt-0.5","mr-3"],[1,"text-sm","font-medium","text-red-800"],[1,"text-green-500","mt-0.5","mr-3"],[1,"text-sm","font-medium","text-green-800"],[1,"mr-1"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","h-5","w-5","text-white"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"]],template:function(a,t){if(a&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"span",4),r(5,"\u{1F9E2}"),e()(),i(6,"h2",5),r(7," \xDAnete a CapVibe "),e(),i(8,"p",6),r(9," Crea tu cuenta y comienza a comprar "),e()(),i(10,"div",7),d(11,J,6,1,"div",8)(12,Y,6,1,"div",9),i(13,"form",10),S("ngSubmit",function(){return t.onSubmit()}),i(14,"div")(15,"label",11),r(16," Nombre Completo "),e(),i(17,"div",12)(18,"div",13)(19,"span",14),r(20,"\u{1F464}"),e()(),u(21,"input",15),e(),d(22,K,4,0,"p",16),e(),i(23,"div")(24,"label",17),r(25," Correo Electr\xF3nico "),e(),i(26,"div",12)(27,"div",13)(28,"span",14),r(29,"@"),e()(),u(30,"input",18),e(),d(31,W,5,2,"p",16),e(),i(32,"div")(33,"label",19),r(34," Contrase\xF1a "),e(),i(35,"div",12)(36,"div",13)(37,"span",14),r(38,"\u2022"),e()(),u(39,"input",20),i(40,"button",21),S("click",function(){return t.showPassword=!t.showPassword}),i(41,"span",22),r(42),e()()(),d(43,X,4,0,"p",16),e(),i(44,"div",23),u(45,"input",24),i(46,"label",25),r(47," Acepto los "),i(48,"a",26),r(49,"t\xE9rminos y condiciones"),e(),r(50," y la "),i(51,"a",26),r(52,"pol\xEDtica de privacidad"),e()()(),i(53,"button",27),d(54,Z,5,0)(55,$,2,0,"span"),e()()(),i(56,"div",28)(57,"p",29),r(58," \xBFYa tienes cuenta? "),i(59,"a",30),r(60," Inicia sesi\xF3n aqu\xED "),e()(),i(61,"a",31)(62,"span"),r(63,"\u2190"),e(),r(64," Volver al inicio "),e()()()()),a&2){let s,c,g,f,x,v,b,_,h;o(11),m(t.errorMessage?11:-1),o(),m(t.successMessage?12:-1),o(),C("formGroup",t.registerForm),o(8),w("border-red-500",((s=t.registerForm.get("name"))==null?null:s.invalid)&&((s=t.registerForm.get("name"))==null?null:s.touched))("border-gray-300",!((c=t.registerForm.get("name"))!=null&&c.invalid)||!((c=t.registerForm.get("name"))!=null&&c.touched)),o(),m((g=t.registerForm.get("name"))!=null&&g.invalid&&((g=t.registerForm.get("name"))!=null&&g.touched)?22:-1),o(8),w("border-red-500",((f=t.registerForm.get("email"))==null?null:f.invalid)&&((f=t.registerForm.get("email"))==null?null:f.touched))("border-gray-300",!((x=t.registerForm.get("email"))!=null&&x.invalid)||!((x=t.registerForm.get("email"))!=null&&x.touched)),o(),m((v=t.registerForm.get("email"))!=null&&v.invalid&&((v=t.registerForm.get("email"))!=null&&v.touched)?31:-1),o(8),w("border-red-500",((b=t.registerForm.get("password"))==null?null:b.invalid)&&((b=t.registerForm.get("password"))==null?null:b.touched))("border-gray-300",!((_=t.registerForm.get("password"))!=null&&_.invalid)||!((_=t.registerForm.get("password"))!=null&&_.touched)),C("type",t.showPassword?"text":"password"),o(3),T(" ",t.showPassword?"Ocultar":"Ver"," "),o(),m((h=t.registerForm.get("password"))!=null&&h.invalid&&((h=t.registerForm.get("password"))!=null&&h.touched)?43:-1),o(10),C("disabled",t.registerForm.invalid||t.loading),o(),m(t.loading?54:55)}},dependencies:[k,P,I,B,A,G,L,q,j,z],encapsulation:2})};export{H as RegisterComponent};
